# 宏定义和全局变量定义的区别

1. 宏会在预处理阶段被替换，而全局变量是在运行时；

2. 宏定义不分配内存，全局变量定义需要分配内存；

3. 宏不区分数据类型，它本质上是一段字符，在预处理的时候被替换到引用的位置，而全局变量区分数据类型；

4. 宏定义之后值是不能改变的，全局变量的值是可以改变的；

5. 宏定义只有在定义所在文件，或引用所在文件的其它文件中使用。 而全局变量可以在工程所有文件中使用，只需在使用前加一个声明。

# UART

两条线，一个输入一个输出，实现全双工收发。异步通信（收发双方各有各的时钟）

在UART控制器中设置校验，波特率。。。

硬件连接TXD-RXD。

**先发送低位后发高位**。

![[Pasted image 20231126144458.png]]

# RS232,  RS485：

232提高电平（12v，-12v）

485用差分信号：


# SPI：

一主多从。


SS   片选信号，MOSI发送信号，MISO接受信号，SCK时钟信号。

全双工，同步串行通信。通信方式由芯片决定。

# CAN

通过CAN收发器，将逻辑信号转化成差分信号：

![[Pasted image 20231126145542.png]]

抗干扰。

![[Pasted image 20231126145702.png]]

最后为ACK码和结束码。

识别码可以完成仲裁，0优先。

# CAN总线和I2C（Inter-Integrated Circuit）总线都是用于设备间通信的串行通信总线协议，但两者有以下不同点：

1. 用途不同：CAN总线通常用于工业控制、汽车网络等高可靠性应用，而I2C通常用于低速控制和数据传输。

2. 速率不同：CAN总线速率可以高达1 Mbps，而I2C总线通常在400 Kbps以下。

3. 线路不同：CAN总线使用双绞线，I2C总线则可以使用双线、三线和四线架构，其中最常见的是双线架构。

4. 地址机制不同：CAN总线使用11位或29位标准帧标识符来识别设备，而I2C总线使用7位或10位设备地址来寻址。

5. 工作方式不同：CAN总线是多主机环境下的异步通信协议，而I2C总线通常在单主机环境下的同步通信协议。

总的来说，虽然CAN总线和I2C总线都是串行通信协议，但它们的应用场景和特点有所不同